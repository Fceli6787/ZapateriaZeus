<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Normalizaci√≥n de BD ‚Ä¢ Zapater√≠a (1FN ‚Üí 3FN)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            brand: { 
              50:'#fef3c7',
              100:'#fde68a',
              200:'#fcd34d',
              300:'#fbbf24',
              400:'#f59e0b',
              500:'#d97706',
              600:'#b45309',
              700:'#92400e',
              800:'#78350f',
              900:'#451a03' 
            }
          },
          boxShadow: { 
            soft: '0 10px 25px -8px rgba(251, 191, 36, .25)',
            'colorful': '0 20px 40px -8px rgba(251, 191, 36, .35)',
            'pop': '5px 5px 0px 0px rgba(0,0,0,1)'
          },
          keyframes: {
            'fade-up': { '0%':{opacity:'0',transform:'translateY(8px) scale(.98)'}, '100%':{opacity:'1',transform:'translateY(0) scale(1)'} },
            'pulse-soft': { '0%,100%':{boxShadow:'0 0 0 0 rgba(251, 191, 36,.35)'}, '50%':{boxShadow:'0 0 0 12px rgba(251, 191, 36,.0)'} },
            'wiggle': { '0%, 100%': { transform: 'rotate(-3deg)' }, '50%': { transform: 'rotate(3deg)' } },
            'bounce-slow': { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
            'gradient': { '0%, 100%': { backgroundPosition: '0% 50%' }, '50%': { backgroundPosition: '100% 50%' } }
          },
          animation: { 
            'fade-up':'fade-up .45s cubic-bezier(.2,.8,.2,1)',
            'pulse-soft':'pulse-soft 1.6s ease-out infinite',
            'wiggle': 'wiggle 1s ease-in-out infinite',
            'bounce-slow': 'bounce-slow 2s ease-in-out infinite',
            'gradient': 'gradient 15s ease infinite'
          },
          backgroundImage: {
            'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
            'gradient-fun': 'linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab)'
          }
        }
      }
    }
  </script>
  <style>
    /* Fondo animado con patrones */
    body {
      background-color: #fef3c7;
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(34, 211, 238, 0.1) 0%, transparent 50%);
      background-attachment: fixed;
    }
    
    /* Tabs m√°s divertidos */
    .tab-btn {
      position: relative;
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border: 2px solid #000;
      font-weight: 600;
      transition: all 0.3s ease;
      transform: perspective(1px) translateZ(0);
    }
    
    .tab-btn:hover {
      transform: translateY(-2px);
      box-shadow: 5px 5px 0px 0px rgba(0,0,0,1);
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
    }
    
    .tab-active {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      box-shadow: 5px 5px 0px 0px rgba(0,0,0,1);
      color: white;
      transform: translateY(-2px);
    }
    
    /* Cards con estilo neomorphico colorido */
    .card-fun {
      background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(254,243,199,0.9) 100%);
      border: 3px solid #000;
      border-radius: 20px;
      position: relative;
      transition: all 0.3s ease;
    }
    
    .card-fun:hover {
      transform: translateY(-4px) rotate(-0.5deg);
      box-shadow: 8px 8px 0px 0px rgba(0,0,0,1);
    }
    
    /* Headers m√°s divertidos */
    h2 {
      background: linear-gradient(135deg, #f59e0b 0%, #dc2626 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      display: inline-block;
      font-weight: 800;
    }
    
    h3 {
      color: #92400e;
      position: relative;
      display: inline-block;
    }
    
    h3::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 100%;
      height: 3px;
      background: #fbbf24;
      border-radius: 2px;
    }
    
    /* Tablas m√°s coloridas */
    table {
      background: white;
      overflow: hidden;
    }
    
    thead {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: white;
      font-weight: 700;
    }
    
    tbody tr {
      transition: all 0.2s ease;
    }
    
    tbody tr:hover {
      background: rgba(251, 191, 36, 0.1);
      transform: scale(1.02);
    }
    
    tbody tr:nth-child(even) {
      background: rgba(254, 243, 199, 0.5);
    }
    
    /* Botones m√°s divertidos */
    button:not(.tab-btn) {
      position: relative;
      transition: all 0.3s ease;
      font-weight: 600;
      border: 2px solid #000;
    }
    
    button:not(.tab-btn):hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    #btn-voice {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      animation: bounce-slow 3s ease-in-out infinite;
    }
    
    #btn-stop-voice {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    }
    
    /* C√≥digo m√°s divertido */
    pre {
        position: relative; /* A√±adido para posicionar el bot√≥n de copiar */
    }

    pre code {
      background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
      padding: 1rem;
      border-radius: 0.75rem;
      font-weight: 600;
      color: #e2e8f0;
      border: 1px solid #4a5568;
      display: block;
      white-space: pre-wrap;
      font-family: 'Courier New', Courier, monospace;
    }
    code:not(pre *) {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      padding: 2px 8px;
      border-radius: 6px;
      font-weight: 600;
      color: #92400e;
      border: 1px solid #fbbf24;
    }
    
    /* Scrollbars personalizados */
    ::-webkit-scrollbar {
      width: 12px;
      height: 12px;
    }
    
    ::-webkit-scrollbar-track {
      background: #fef3c7;
      border-radius: 6px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      border-radius: 6px;
      border: 2px solid #fef3c7;
    }
    
    /* Aside cards especiales */
    .aside-card {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      border: 3px solid #000;
      position: relative;
      overflow: hidden;
    }
    
    .aside-card::before {
      content: 'üí°';
      position: absolute;
      top: -20px;
      right: -20px;
      font-size: 80px;
      opacity: 0.1;
      transform: rotate(-15deg);
    }
    
    /* Header m√°s divertido */
    header {
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(254,243,199,0.95) 100%);
      border-bottom: 3px solid #000;
    }
    
    /* Footer m√°s divertido */
    footer {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      color: white;
      border-top: 3px solid #000;
    }
    
    /* Animaci√≥n del logo */
    .logo-shoe {
      animation: wiggle 2s ease-in-out infinite;
      background: linear-gradient(135deg, #f59e0b 0%, #dc2626 100%);
      box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
    }
    
    /* Select m√°s divertido */
    select {
      border: 2px solid #000;
      background-color: white;
      font-weight: 600;
    }
    
    select:hover {
      box-shadow: 3px 3px 0px 0px rgba(0,0,0,1);
    }
    
    /* Animaci√≥n de entrada */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .panel, .sub-panel {
      animation: slideIn 0.5s ease-out forwards;
    }
    .sub-panel {
      animation-name: fade-up;
    }

    /* Elementos decorativos */
    .decoration-dot {
      position: absolute;
      width: 20px;
      height: 20px;
      background: #fbbf24;
      border-radius: 50%;
      opacity: 0.3;
    }
    
    /* ERD viewport m√°s divertido */
    #erd-viewport {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border: 3px solid #000;
      position: relative;
      overflow: hidden;
    }
    
    #erd-viewport::before {
      content: 'üìê';
      position: absolute;
      bottom: 10px;
      right: 10px;
      font-size: 40px;
      opacity: 0.2;
    }
  </style>
</head>
<body class="min-h-screen text-slate-800">
  <header class="sticky top-0 z-30 backdrop-blur">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-4 flex items-center gap-4">
      <div class="flex items-center gap-3">
        <div class="logo-shoe size-12 rounded-xl text-white grid place-content-center text-2xl">üëü</div>
        <div>
          <h1 class="text-lg sm:text-2xl font-black tracking-tight">Normalizaci√≥n de Bases de Datos ‚Äî Caso: Zapater√≠a üöÄ</h1>
          <p class="text-slate-700 text-xs sm:text-sm mt-1">Autores: <strong class="text-brand-600">Maria Camila Murcia Bernal</strong> (ID: 891706) y <strong class="text-brand-600">Andres Felipe Celi Jimenez</strong> (ID: 886628) ‚Ä¢ Materia: <strong>Arquitectura de Datos</strong> ‚Ä¢ NRC: <strong>80131</strong></p>
        </div>
      </div>
      <div class="ml-auto flex items-center flex-wrap gap-2">
        <label for="voice-select" class="sr-only">Voz</label>
        <select id="voice-select" class="rounded-xl px-3 py-2 text-sm min-w-[180px]" title="Selecciona la voz">
          <option value="">üé§ Voz (auto)</option>
        </select>
        <button id="btn-voice" class="rounded-xl text-white px-4 py-2 text-sm shadow-pop">üîä Explicaci√≥n con voz</button>
        <button id="btn-stop-voice" class="rounded-xl text-white px-4 py-2 text-sm shadow-pop">‚èπÔ∏è Detener</button>
      </div>
    </div>
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 pb-4">
      <div class="flex flex-wrap gap-2 sm:gap-3">
        <button data-tab="original" class="tab-btn tab-active rounded-xl px-4 py-2 text-sm">üìã Tabla Original</button>
        <button data-tab="1fn" class="tab-btn rounded-xl px-4 py-2 text-sm">1Ô∏è‚É£ Primera Forma Normal</button>
        <button data-tab="2fn" class="tab-btn rounded-xl px-4 py-2 text-sm">2Ô∏è‚É£ Segunda Forma Normal</button>
        <button data-tab="3fn" class="tab-btn rounded-xl px-4 py-2 text-sm">3Ô∏è‚É£ Tercera Forma Normal</button>
        <button data-tab="erd" class="tab-btn rounded-xl px-4 py-2 text-sm">üé® Diagrama Final</button>
        <button data-tab="implementacion" class="tab-btn rounded-xl px-4 py-2 text-sm">üöÄ Implementaci√≥n</button>
        <button data-tab="consultas" class="tab-btn rounded-xl px-4 py-2 text-sm">üîç Consultas</button>
        <button data-tab="extras" class="tab-btn rounded-xl px-4 py-2 text-sm">üí° Extras</button>
      </div>
    </nav>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 pt-6 pb-20 space-y-8">
    <!-- ORIGINAL -->
    <section id="panel-original" class="panel">
      <div class="grid md:grid-cols-3 gap-6">
        <div class="md:col-span-2 card-fun p-4 sm:p-6">
          <h2 class="text-2xl font-black mb-3">üìä Tabla Original (ventas consolidadas)</h2>
          <p class="text-slate-700 mb-4">Hoja de ventas con <span class="font-bold text-brand-600">productos listados en una sola celda</span> por factura (viola 1FN). Las columnas repiten datos de cliente, empleado y sucursal en cada fila.</p>
          <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
            <table class="min-w-full text-sm">
              <thead class="text-white">
                <tr>
                  <th class="px-4 py-3 text-left">Factura</th>
                  <th class="px-4 py-3 text-left">Fecha</th>
                  <th class="px-4 py-3 text-left">Cliente</th>
                  <th class="px-4 py-3 text-left">Empleado</th>
                  <th class="px-4 py-3 text-left">Sucursal</th>
                  <th class="px-4 py-3 text-left">Productos</th>
                </tr>
              </thead>
              <tbody id="tbody-original" class="divide-y divide-slate-200"></tbody>
            </table>
          </div>
        </div>
        <aside class="aside-card rounded-2xl shadow-pop p-4 sm:p-6">
          <h3 class="font-bold text-lg mb-3">Objetivo</h3>
          <div data-role="explanation" class="text-sm text-slate-800 mt-2 space-y-2">
            <p>Partimos de una hoja de c√°lculo t√≠pica. Corregiremos datos no at√≥micos (1FN), dependencias parciales (2FN) y transitivas (3FN) hasta llegar a un dise√±o robusto como el del esquema de Zapater√≠a.</p>
            <ul class="list-disc pl-5 space-y-1">
              <li>‚ú® 1FN: dividir productos en filas.</li>
              <li>üéØ 2FN: separar cabecera de factura de su detalle.</li>
              <li>üöÄ 3FN: usar tablas maestras y claves for√°neas.</li>
            </ul>
          </div>
        </aside>
      </div>
    </section>

    <!-- 1FN -->
    <section id="panel-1fn" class="panel hidden">
      <div class="grid md:grid-cols-3 gap-6">
        <div class="md:col-span-2 card-fun p-4 sm:p-6">
          <h2 class="text-2xl font-black mb-3">1Ô∏è‚É£ Primera Forma Normal (1FN)</h2>
          <p class="text-slate-700 mb-4">Cada producto pasa a una fila. La clave es compuesta <code>(factura, item)</code>. A√∫n hay datos que dependen solo de la factura.</p>
          <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
            <table class="min-w-full text-sm">
              <thead class="text-white">
                <tr>
                  <th class="px-4 py-3 text-left">Factura</th>
                  <th class="px-4 py-3 text-left">Item</th>
                  <th class="px-4 py-3 text-left">SKU</th>
                  <th class="px-4 py-3 text-left">Talla</th>
                  <th class="px-4 py-3 text-left">Color</th>
                  <th class="px-4 py-3 text-left">Precio</th>
                  <th class="px-4 py-3 text-left">Cantidad</th>
                  <th class="px-4 py-3 text-left">Cliente</th>
                  <th class="px-4 py-3 text-left">Empleado</th>
                  <th class="px-4 py-3 text-left">Sucursal</th>
                </tr>
              </thead>
              <tbody id="tbody-1fn" class="divide-y divide-slate-200"></tbody>
            </table>
          </div>
        </div>
        <aside class="aside-card rounded-2xl shadow-pop p-4 sm:p-6">
          <h3 class="font-bold text-lg mb-3">¬øQu√© se corrigi√≥?</h3>
          <div data-role="explanation" class="text-sm text-slate-800 mt-2 space-y-2">
            <p>‚úÖ Los datos son at√≥micos: no hay listas en celdas. Sin embargo, <em class="font-bold">Cliente</em>, <em class="font-bold">Empleado</em> y <em class="font-bold">Sucursal</em> dependen solo de <strong>Factura</strong> (dependencia parcial). Lo arreglamos en 2FN.</p>
          </div>
        </aside>
      </div>
    </section>

    <!-- 2FN -->
    <section id="panel-2fn" class="panel hidden">
      <div class="grid gap-6">
        <div class="card-fun p-4 sm:p-6">
          <h2 class="text-2xl font-black mb-3">2Ô∏è‚É£ Segunda Forma Normal (2FN)</h2>
          <p class="text-slate-700 mb-4">Separamos cabecera y detalle para eliminar dependencias parciales:</p>
          <ul class="list-disc pl-5 text-slate-800 text-sm mb-4 space-y-1">
            <li>üìÑ <strong>Factura</strong>(<code>id_factura PK</code>, fecha_hora, cliente, empleado, sucursal)</li>
            <li>üìã <strong>DetalleFactura</strong>(<code>id_factura FK</code>, item, sku, talla, color, precio_unidad, cantidad)</li>
          </ul>
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <h3 class="font-bold mb-2">üìë Tabla: Factura (cabecera)</h3>
              <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
                <table class="min-w-full text-sm">
                  <thead class="text-white">
                    <tr>
                      <th class="px-4 py-3 text-left">id_factura</th>
                      <th class="px-4 py-3 text-left">fecha_hora</th>
                      <th class="px-4 py-3 text-left">cliente</th>
                      <th class="px-4 py-3 text-left">empleado</th>
                      <th class="px-4 py-3 text-left">sucursal</th>
                    </tr>
                  </thead>
                  <tbody id="tbody-2fn-a" class="divide-y divide-slate-200"></tbody>
                </table>
              </div>
            </div>
            <div>
              <h3 class="font-bold mb-2">üìù Tabla: DetalleFactura</h3>
              <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
                <table class="min-w-full text-sm">
                  <thead class="text-white">
                    <tr>
                      <th class="px-4 py-3 text-left">id_factura</th>
                      <th class="px-4 py-3 text-left">item</th>
                      <th class="px-4 py-3 text-left">sku</th>
                      <th class="px-4 py-3 text-left">talla</th>
                      <th class="px-4 py-3 text-left">color</th>
                      <th class="px-4 py-3 text-left">precio_unidad</th>
                      <th class="px-4 py-3 text-left">cantidad</th>
                    </tr>
                  </thead>
                  <tbody id="tbody-2fn-b" class="divide-y divide-slate-200"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <aside class="aside-card rounded-2xl shadow-pop p-4 sm:p-6">
          <h3 class="font-bold text-lg mb-3">¬øQu√© mejor√≥?</h3>
          <div data-role="explanation" class="text-sm text-slate-800 mt-2 space-y-2">
            <p>üéâ El detalle solo guarda informaci√≥n por √≠tem; los datos de cabecera viven en <em class="font-bold">Factura</em>. Se evita actualizar cliente/empleado/sucursal repetidamente por cada producto.</p>
          </div>
        </aside>
      </div>
    </section>

    <!-- 3FN -->
    <section id="panel-3fn" class="panel hidden">
      <div class="grid gap-6">
        <div class="card-fun p-4 sm:p-6">
          <h2 class="text-2xl font-black mb-3">3Ô∏è‚É£ Tercera Forma Normal (3FN)</h2>
          <p class="text-slate-700 mb-4">Creamos entidades maestras y claves for√°neas, alineadas con el <strong class="text-brand-600">esquema Zapater√≠a</strong>:</p>
          <div class="grid lg:grid-cols-2 gap-6">
            <div class="space-y-6">
              <div>
                <h3 class="font-bold mb-2">üë• Cliente</h3>
                <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
                  <table class="min-w-full text-sm">
                    <thead class="text-white">
                      <tr>
                        <th class="px-4 py-3 text-left">id_cliente</th>
                        <th class="px-4 py-3 text-left">apellidos</th>
                        <th class="px-4 py-3 text-left">nombres</th>
                      </tr>
                    </thead>
                    <tbody id="tbody-3fn-clientes" class="divide-y divide-slate-200"></tbody>
                  </table>
                </div>
              </div>
              <div>
                <h3 class="font-bold mb-2">üë∑ Empleado</h3>
                <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
                  <table class="min-w-full text-sm">
                    <thead class="text-white">
                      <tr>
                        <th class="px-4 py-3 text-left">id_empleado</th>
                        <th class="px-4 py-3 text-left">nombres</th>
                        <th class="px-4 py-3 text-left">apellidos</th>
                      </tr>
                    </thead>
                    <tbody id="tbody-3fn-empleados" class="divide-y divide-slate-200"></tbody>
                  </table>
                </div>
              </div>
              <div>
                <h3 class="font-bold mb-2">üè¢ Sucursal</h3>
                <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
                  <table class="min-w-full text-sm">
                    <thead class="text-white">
                      <tr>
                        <th class="px-4 py-3 text-left">id_sucursal</th>
                        <th class="px-4 py-3 text-left">nombre</th>
                      </tr>
                    </thead>
                                        <tbody id="tbody-3fn-sucursales" class="divide-y divide-slate-200"></tbody>
                  </table>
                </div>
              </div>
            </div>
            <div class="space-y-6">
              <div>
                <h3 class="font-bold mb-2">üëü ReferenciaProducto</h3>
                <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
                  <table class="min-w-full text-sm">
                    <thead class="text-white">
                      <tr>
                        <th class="px-4 py-3 text-left">id_referencia</th>
                        <th class="px-4 py-3 text-left">sku</th>
                        <th class="px-4 py-3 text-left">talla</th>
                        <th class="px-4 py-3 text-left">color</th>
                        <th class="px-4 py-3 text-left">precio</th>
                      </tr>
                    </thead>
                    <tbody id="tbody-3fn-referencias" class="divide-y divide-slate-200"></tbody>
                  </table>
                </div>
              </div>
              <div>
                <h3 class="font-bold mb-2">üßæ Factura (FK a Cliente, Empleado, Sucursal)</h3>
                <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
                  <table class="min-w-full text-sm">
                    <thead class="text-white">
                      <tr>
                        <th class="px-4 py-3 text-left">id_factura</th>
                        <th class="px-4 py-3 text-left">fecha_hora</th>
                        <th class="px-4 py-3 text-left">id_cliente</th>
                        <th class="px-4 py-3 text-left">id_empleado</th>
                        <th class="px-4 py-3 text-left">id_sucursal</th>
                        <th class="px-4 py-3 text-left">total</th>
                      </tr>
                    </thead>
                    <tbody id="tbody-3fn-facturas" class="divide-y divide-slate-200"></tbody>
                  </table>
                </div>
              </div>
              <div>
                <h3 class="font-bold mb-2">üìã DetalleFactura (FK a Factura y Referencia)</h3>
                <div class="overflow-auto rounded-xl border-3 border-black shadow-pop">
                  <table class="min-w-full text-sm">
                    <thead class="text-white">
                      <tr>
                        <th class="px-4 py-3 text-left">id_factura</th>
                        <th class="px-4 py-3 text-left">item</th>
                        <th class="px-4 py-3 text-left">id_referencia</th>
                        <th class="px-4 py-3 text-left">cantidad</th>
                        <th class="px-4 py-3 text-left">valor_unitario</th>
                      </tr>
                    </thead>
                    <tbody id="tbody-3fn-detalle" class="divide-y divide-slate-200"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <aside class="aside-card rounded-2xl shadow-pop p-4 sm:p-6">
          <h3 class="font-bold text-lg mb-3">üéØ Resultado</h3>
          <div data-role="explanation" class="text-sm text-slate-800 mt-2 space-y-2">
            <p>üåü El dise√±o 3FN coincide con el <em class="font-bold">modelo Zapater√≠a</em>: datos maestros en sus tablas, y transacciones en <strong>Factura</strong> y <strong>DetalleFactura</strong>. Reglas de negocio (inventario, pagos, etc.) se integran mediante claves for√°neas.</p>
          </div>
        </aside>
      </div>
    </section>

    <!-- ERD -->
    <section id="panel-erd" class="panel hidden">
      <div class="card-fun p-4 sm:p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-2xl font-black">üé® Diagrama Final Interactivo</h2>
          <div class="flex items-center gap-2">
            <button id="erd-zoom-in" class="rounded-xl bg-white px-3 py-2 text-sm border-2 border-black hover:shadow-pop hover:-translate-y-1 transition-all" title="Acercar">‚ûï</button>
            <button id="erd-zoom-out" class="rounded-xl bg-white px-3 py-2 text-sm border-2 border-black hover:shadow-pop hover:-translate-y-1 transition-all" title="Alejar">‚ûñ</button>
            <button id="erd-zoom-fit" class="rounded-xl bg-white px-3 py-2 text-sm border-2 border-black hover:shadow-pop hover:-translate-y-1 transition-all" title="Ajustar">üéØ Ajustar</button>
          </div>
        </div>
        
        <div id="erd-viewport" class="h-[70vh] overflow-hidden cursor-grab active:cursor-grabbing rounded-xl shadow-pop">
          <img id="erd-interactive-img" src="img/erd zapateria.jpg" alt="Diagrama ERD de la Zapater√≠a" class="max-w-none max-h-none transition-transform duration-100" style="transform-origin: 0 0;" />
        </div>
      </div>
      <aside class="aside-card rounded-2xl shadow-pop p-4 sm:p-6 mt-6">
        <h3 class="font-bold text-lg mb-3">üìñ Lectura r√°pida del ERD</h3>
        <div data-role="explanation" class="text-sm text-slate-800 mt-2 space-y-2">
          <p>üîó <strong>Factura</strong> referencia a Cliente, Empleado y Sucursal. <strong>DetalleFactura</strong> referencia a Factura y a <em class="font-bold">ReferenciaProducto</em>, que a su vez referencia a <em>Producto</em> y √©ste a <em>Marca</em> y <em>Categoria</em>. <em>Inventario</em> controla el stock por referencia y <em>Pago</em> enlaza con Factura.</p>
        </div>
      </aside>
    </section>

    <!-- IMPLEMENTACION -->
    <section id="panel-implementacion" class="panel hidden">
      <div class="card-fun p-4 sm:p-6">
        <h2 class="text-2xl font-black mb-4">üöÄ Implementaci√≥n en SQL</h2>
        
        <div class="flex flex-wrap gap-2 sm:gap-3 mb-6 border-b-2 border-black pb-4">
          <button data-sub-tab="impl-db" class="sub-tab-btn tab-btn tab-active rounded-xl px-4 py-2 text-sm">1. Crear BD</button>
          <button data-sub-tab="impl-tables" class="sub-tab-btn tab-btn rounded-xl px-4 py-2 text-sm">2. Crear Tablas</button>
          <button data-sub-tab="impl-inserts" class="sub-tab-btn tab-btn rounded-xl px-4 py-2 text-sm">3. Insertar Datos</button>
        </div>

        <div id="sub-panel-impl-db" class="sub-panel space-y-6">
          <h3 class="font-bold text-lg">Paso 1: Crear la Base de Datos</h3>
          <p class="text-slate-700">El comando inicial se asegura de empezar desde cero, eliminando cualquier versi√≥n anterior de la base de datos antes de crearla y seleccionarla para su uso.</p>
          <pre><code class="language-sql">DROP DATABASE IF EXISTS TiendaZapatos;
CREATE DATABASE TiendaZapatos;
USE TiendaZapatos;</code></pre>
          <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-6">
            <img src="/img/creacion-bd.png" alt="Captura de la creaci√≥n de la base de datos." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
            <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre de archivo: <strong>creacion-bd.png</strong>)</p>
            <p class="text-xs text-slate-500 mt-1">Fecha y hora de ejecuci√≥n: <span class="font-mono">2025-08-27 10:45:15</span> (actualizar)</p>
          </div>
        </div>

        <div id="sub-panel-impl-tables" class="sub-panel hidden space-y-6">
          <h3 class="font-bold text-lg">Paso 2: Crear la Estructura de Tablas</h3>
          <p class="text-slate-700">A continuaci√≥n, se presentan las sentencias <code>CREATE TABLE</code> para cada una de las tablas del modelo. Utiliza los botones para navegar entre las tablas como si fuera una presentaci√≥n.</p>
          
          <div id="table-slideshow-container" class="relative mt-6">
            <!-- Controles de Navegaci√≥n del Slideshow -->
            <div class="flex items-center justify-center gap-4 mb-4">
              <button id="prev-table-btn" class="size-10 bg-white rounded-full grid place-content-center font-bold text-lg shadow-pop border-2 border-black">&lt;</button>
              <span id="table-slide-counter" class="font-bold text-brand-700 text-lg px-4 py-2 bg-white rounded-xl border-2 border-black"></span>
              <button id="next-table-btn" class="size-10 bg-white rounded-full grid place-content-center font-bold text-lg shadow-pop border-2 border-black">&gt;</button>
            </div>

            <!-- Contenedor de las "Diapositivas" -->
            <div id="table-slides-wrapper">
              <!-- Slide 1: Tienda -->
              <div class="table-slide bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: Tienda</h4>
                <pre><code class="language-sql">CREATE TABLE Tienda (
    idTienda INT AUTO_INCREMENT PRIMARY KEY,
    NombreTienda VARCHAR(45) NOT NULL,
    Direccion VARCHAR(100),
    Descripcion VARCHAR(100)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-tienda.png" alt="Captura de la creaci√≥n de la tabla Tienda." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-tienda.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 2: Cliente -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: Cliente</h4>
                <pre><code class="language-sql">CREATE TABLE Cliente (
    idCliente INT AUTO_INCREMENT PRIMARY KEY,
    Nombres VARCHAR(45) NOT NULL,
    PrimerApellido VARCHAR(45) NOT NULL,
    SegundoApellido VARCHAR(45),
    NIT VARCHAR(15) UNIQUE,
    Correo VARCHAR(45),
    Telefono VARCHAR(15)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-cliente.png" alt="Captura de la creaci√≥n de la tabla Cliente." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-cliente.png</strong>)</p>
                </div>
              </div>
              
              <!-- Slide 3: Empleado -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: Empleado</h4>
                <pre><code class="language-sql">CREATE TABLE Empleado (
    idEmpleado INT AUTO_INCREMENT PRIMARY KEY,
    Nombres VARCHAR(45) NOT NULL,
    PrimerApellido VARCHAR(45) NOT NULL,
    SegundoApellido VARCHAR(45),
    RolEmpleado VARCHAR(45) NOT NULL,
    idTienda INT,
    FOREIGN KEY (idTienda) REFERENCES Tienda(idTienda)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-empleado.png" alt="Captura de la creaci√≥n de la tabla Empleado." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-empleado.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 4: Producto -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: Producto</h4>
                <pre><code class="language-sql">CREATE TABLE Producto (
    idProducto INT AUTO_INCREMENT PRIMARY KEY,
    NombreProducto VARCHAR(45) NOT NULL,
    Descripcion VARCHAR(100),
    Categoria VARCHAR(45),
    Marca VARCHAR(45),
    Talla VARCHAR(10),
    Color VARCHAR(45),
    SKU VARCHAR(45) UNIQUE,
    Precio DECIMAL(10,2) NOT NULL,
    Estado VARCHAR(45) DEFAULT 'Activo'
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-producto.png" alt="Captura de la creaci√≥n de la tabla Producto." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-producto.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 5: Inventario -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: Inventario</h4>
                <pre><code class="language-sql">CREATE TABLE Inventario (
    idInventario INT AUTO_INCREMENT PRIMARY KEY,
    idTienda INT,
    idProducto INT,
    CantidadDisponible INT NOT NULL,
    FOREIGN KEY (idTienda) REFERENCES Tienda(idTienda),
    FOREIGN KEY (idProducto) REFERENCES Producto(idProducto)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-inventario.png" alt="Captura de la creaci√≥n de la tabla Inventario." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-inventario.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 6: Proveedor -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: Proveedor</h4>
                <pre><code class="language-sql">CREATE TABLE Proveedor (
    idProveedor INT AUTO_INCREMENT PRIMARY KEY,
    Nombres VARCHAR(45) NOT NULL,
    PrimerApellido VARCHAR(45),
    SegundoApellido VARCHAR(45),
    NIT VARCHAR(15) UNIQUE,
    Telefono VARCHAR(15),
    Correo VARCHAR(45)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-proveedor.png" alt="Captura de la creaci√≥n de la tabla Proveedor." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-proveedor.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 7: CompraProducto -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: CompraProducto</h4>
                <pre><code class="language-sql">CREATE TABLE CompraProducto (
    idCompraProducto INT AUTO_INCREMENT PRIMARY KEY,
    FechaCompra DATE NOT NULL,
    SubTotal DECIMAL(10,2),
    ValorImpuestos DECIMAL(10,2),
    TotalCompra DECIMAL(10,2),
    idTienda INT,
    idProveedor INT,
    FOREIGN KEY (idTienda) REFERENCES Tienda(idTienda),
    FOREIGN KEY (idProveedor) REFERENCES Proveedor(idProveedor)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-compraproducto.png" alt="Captura de la creaci√≥n de la tabla CompraProducto." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-compraproducto.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 8: DetalleCompraProductos -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: DetalleCompraProductos</h4>
                <pre><code class="language-sql">CREATE TABLE DetalleCompraProductos (
    idDetalleCompraProductos INT AUTO_INCREMENT PRIMARY KEY,
    idCompraProducto INT,
    idProducto INT,
    Cantidad INT NOT NULL,
    PrecioUnidad DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (idCompraProducto) REFERENCES CompraProducto(idCompraProducto),
    FOREIGN KEY (idProducto) REFERENCES Producto(idProducto)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-detallecompra.png" alt="Captura de la creaci√≥n de la tabla DetalleCompraProductos." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-detallecompra.png</strong>)</p>
                </div>
              </div>
              
              <!-- Slide 9: Factura -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: Factura</h4>
                <pre><code class="language-sql">CREATE TABLE Factura (
    idFactura INT AUTO_INCREMENT PRIMARY KEY,
    FechaHora DATETIME NOT NULL,
    SubTotal DECIMAL(10,2) NOT NULL,
    Descuento DECIMAL(10,2) DEFAULT 0,
    Total DECIMAL(10,2) NOT NULL,
    FacturaVencida VARCHAR(45) DEFAULT 'NO',
    idEmpleado INT,
    idCliente INT,
    idTienda INT,
    FOREIGN KEY (idEmpleado) REFERENCES Empleado(idEmpleado),
    FOREIGN KEY (idCliente) REFERENCES Cliente(idCliente),
    FOREIGN KEY (idTienda) REFERENCES Tienda(idTienda)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-factura.png" alt="Captura de la creaci√≥n de la tabla Factura." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-factura.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 10: DetalleFactura -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: DetalleFactura</h4>
                <pre><code class="language-sql">CREATE TABLE DetalleFactura (
    idDetalleFactura INT AUTO_INCREMENT PRIMARY KEY,
    idFactura INT,
    idProducto INT,
    Cantidad INT NOT NULL,
    ValorUnitario DECIMAL(10,2) NOT NULL,
    Descuento DECIMAL(10,2) DEFAULT 0,
    IVA DECIMAL(10,2) DEFAULT 0,
    FOREIGN KEY (idFactura) REFERENCES Factura(idFactura),
    FOREIGN KEY (idProducto) REFERENCES Producto(idProducto)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-detallefactura.png" alt="Captura de la creaci√≥n de la tabla DetalleFactura." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-detallefactura.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 11: Pago -->
              <div class="table-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Tabla: Pago</h4>
                <pre><code class="language-sql">CREATE TABLE Pago (
    idPago INT AUTO_INCREMENT PRIMARY KEY,
    Monto DECIMAL(10,2) NOT NULL,
    TipoPago VARCHAR(45) NOT NULL,
    idFactura INT,
    FOREIGN KEY (idFactura) REFERENCES Factura(idFactura)
);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/creacion-tabla-pago.png" alt="Captura de la creaci√≥n de la tabla Pago." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>creacion-tabla-pago.png</strong>)</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="sub-panel-impl-inserts" class="sub-panel hidden space-y-6">
          <h3 class="font-bold text-lg">Paso 3: Poblar las Tablas con Datos</h3>
          <p class="text-slate-700">Finalmente, se usan sentencias <code>INSERT INTO</code> para llenar las tablas. El orden es crucial: se debe insertar primero en las tablas que no tienen dependencias y luego en las que s√≠ las tienen. Navega por cada paso de la inserci√≥n.</p>
          
          <div id="insert-slideshow-container" class="relative mt-6">
            <!-- Controles de Navegaci√≥n -->
            <div class="flex items-center justify-center gap-4 mb-4">
              <button id="prev-insert-btn" class="size-10 bg-white rounded-full grid place-content-center font-bold text-lg shadow-pop border-2 border-black">&lt;</button>
              <span id="insert-slide-counter" class="font-bold text-brand-700 text-lg px-4 py-2 bg-white rounded-xl border-2 border-black"></span>
              <button id="next-insert-btn" class="size-10 bg-white rounded-full grid place-content-center font-bold text-lg shadow-pop border-2 border-black">&gt;</button>
            </div>
            
            <!-- Contenedor de las "Diapositivas" de Inserci√≥n -->
            <div id="insert-slides-wrapper">
              <!-- Slide 1: Tienda -->
              <div class="insert-slide bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Tienda</h4>
                <pre><code class="language-sql">INSERT INTO Tienda (NombreTienda, Direccion, Descripcion) VALUES
('Zapater√≠a Central', 'Calle 10 #25-30, Bogot√°', 'Sucursal principal en Bogot√°'),
('Calzado Express', 'Carrera 45 #80-12, Medell√≠n', 'Sucursal Medell√≠n'),
('Fashion Shoes', 'Av. Siempre Viva #123, Cali', 'Sucursal en Cali');</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-tienda.png" alt="Resultado de la inserci√≥n en la tabla Tienda." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-tienda.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 2: Cliente -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Cliente</h4>
                <pre><code class="language-sql">INSERT INTO Cliente (Nombres, PrimerApellido, SegundoApellido, NIT, Correo, Telefono) VALUES
('Carlos', 'G√≥mez', 'Mart√≠nez', '900123456', 'carlos.gomez@example.com', '3001112233'),
('Mar√≠a', 'L√≥pez', 'Fern√°ndez', '901234567', 'maria.lopez@example.com', '3102223344'),
('Andr√©s', 'P√©rez', 'Rodr√≠guez', '902345678', 'andres.perez@example.com', '3203334455');</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-cliente.png" alt="Resultado de la inserci√≥n en la tabla Cliente." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-cliente.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 3: Empleado -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Empleado</h4>
                <pre><code class="language-sql">INSERT INTO Empleado (Nombres, PrimerApellido, SegundoApellido, RolEmpleado, idTienda) VALUES
('Laura', 'Ram√≠rez', 'Su√°rez', 'Cajera', 1),
('Jorge', 'Mendoza', 'Castro', 'Vendedor', 1),
('Paola', 'D√≠az', 'Jim√©nez', 'Administrador', 2),
('Luis', 'Ortiz', 'Garc√≠a', 'Vendedor', 3);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-empleado.png" alt="Resultado de la inserci√≥n en la tabla Empleado." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-empleado.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 4: Proveedor -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Proveedor</h4>
                <pre><code class="language-sql">INSERT INTO Proveedor (Nombres, PrimerApellido, SegundoApellido, NIT, Telefono, Correo) VALUES
('Pedro', 'S√°nchez', 'Morales', '800123456', '3015556677', 'pedro.sanchez@proveedor.com'),
('Ana', 'Torres', 'Castillo', '801234567', '3026667788', 'ana.torres@proveedor.com');</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-proveedor.png" alt="Resultado de la inserci√≥n en la tabla Proveedor." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-proveedor.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 5: Producto -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Producto</h4>
                <pre><code class="language-sql">INSERT INTO Producto (NombreProducto, Descripcion, Categoria, Marca, Talla, Color, SKU, Precio, Estado) VALUES
('Zapatilla Running', 'Calzado deportivo para correr', 'Deportivo', 'Nike', '42', 'Negro', 'SKU001', 250000, 'Activo'),
('Zapato Formal Hombre', 'Zapato de cuero elegante', 'Formal', 'Clarks', '40', 'Caf√©', 'SKU002', 320000, 'Activo'),
('Sandalia Mujer', 'Sandalia casual para dama', 'Casual', 'Adidas', '37', 'Beige', 'SKU003', 150000, 'Activo'),
('Botas Hombre', 'Bota de cuero resistente', 'Casual', 'Timberland', '43', 'Marr√≥n', 'SKU004', 450000, 'Activo');</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-producto.png" alt="Resultado de la inserci√≥n en la tabla Producto." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-producto.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 6: Inventario -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Inventario</h4>
                <pre><code class="language-sql">INSERT INTO Inventario (idTienda, idProducto, CantidadDisponible) VALUES
(1, 1, 15),
(1, 2, 10),
(2, 3, 20),
(3, 4, 8);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-inventario.png" alt="Resultado de la inserci√≥n en la tabla Inventario." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-inventario.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 7: CompraProducto -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: CompraProducto</h4>
                <pre><code class="language-sql">INSERT INTO CompraProducto (FechaCompra, SubTotal, ValorImpuestos, TotalCompra, idTienda, idProveedor) VALUES
('2025-08-01', 600000, 114000, 714000, 1, 1),
('2025-08-05', 450000, 85500, 535500, 2, 2);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-compra.png" alt="Resultado de la inserci√≥n en la tabla CompraProducto." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-compra.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 8: DetalleCompraProductos -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Detalle de Compra</h4>
                <pre><code class="language-sql">INSERT INTO DetalleCompraProductos (idCompraProducto, idProducto, Cantidad, PrecioUnidad) VALUES
(1, 1, 10, 240000),
(1, 2, 5, 300000),
(2, 3, 15, 140000),
(2, 4, 5, 430000);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-detallecompra.png" alt="Resultado de la inserci√≥n en DetalleCompraProductos." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-detallecompra.png</strong>)</p>
                </div>
              </div>

              <!-- Slide 9: Factura -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Factura</h4>
                <pre><code class="language-sql">INSERT INTO Factura (FechaHora, SubTotal, Descuento, Total, FacturaVencida, idEmpleado, idCliente, idTienda) VALUES
('2025-08-20 14:30:00', 500000, 20000, 480000, 'NO', 1, 1, 1),
('2025-08-21 16:00:00', 320000, 0, 320000, 'NO', 2, 2, 1),
('2025-08-22 11:15:00', 600000, 30000, 570000, 'NO', 3, 3, 2);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-factura.png" alt="Resultado de la inserci√≥n en la tabla Factura." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-factura.png</strong>)</p>
                </div>
              </div>
              
              <!-- Slide 10: DetalleFactura -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Detalle de Factura</h4>
                <pre><code class="language-sql">INSERT INTO DetalleFactura (idFactura, idProducto, Cantidad, ValorUnitario, Descuento, IVA) VALUES
(1, 1, 2, 250000, 20000, 47500),
(2, 2, 1, 320000, 0, 60800),
(3, 3, 3, 150000, 30000, 85500);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-detallefactura.png" alt="Resultado de la inserci√≥n en la tabla DetalleFactura." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-detallefactura.png</strong>)</p>
                </div>
              </div>
              
              <!-- Slide 11: Pago -->
              <div class="insert-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
                <h4 class="font-bold text-brand-700 mb-2 text-center">Inserts: Pago</h4>
                <pre><code class="language-sql">INSERT INTO Pago (Monto, TipoPago, idFactura) VALUES
(480000, 'Tarjeta Cr√©dito', 1),
(320000, 'Efectivo', 2),
(570000, 'Transferencia', 3);</code></pre>
                <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                  <img src="img/insert-pago.png" alt="Resultado de la inserci√≥n en la tabla Pago." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                  <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>insert-pago.png</strong>)</p>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONSULTAS -->
    <section id="panel-consultas" class="panel hidden">
       <div class="card-fun p-4 sm:p-6">
        <h2 class="text-2xl font-black mb-4">üîç Consultas SQL Adaptadas</h2>
        <p class="text-slate-700">Explora las diferentes consultas SQL para interactuar con la base de datos. Utiliza los botones para navegar a trav√©s de los ejemplos, desde los m√°s simples hasta los m√°s complejos.</p>

        <div id="query-slideshow-container" class="relative mt-6">
          <!-- Controles de Navegaci√≥n -->
          <div class="flex items-center justify-center gap-4 mb-4">
            <button id="prev-query-btn" class="size-10 bg-white rounded-full grid place-content-center font-bold text-lg shadow-pop border-2 border-black">&lt;</button>
            <span id="query-slide-counter" class="font-bold text-brand-700 text-lg px-4 py-2 bg-white rounded-xl border-2 border-black"></span>
            <button id="next-query-btn" class="size-10 bg-white rounded-full grid place-content-center font-bold text-lg shadow-pop border-2 border-black">&gt;</button>
          </div>

          <!-- Contenedor de las "Diapositivas" de Consultas -->
          <div id="query-slides-wrapper">
            <!-- Slide 1: Ver todos los clientes -->
            <div class="query-slide bg-white/50 p-4 rounded-xl border-2 border-black/50">
              <h4 class="font-bold text-brand-700 mb-2 text-center">1. Ver todos los clientes</h4>
              <pre><code class="language-sql">SELECT * FROM Cliente;</code></pre>
              <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                <img src="img/consulta-simple-1.png" alt="Resultado de ver todos los clientes." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>consulta-simple-1.png</strong>)</p>
              </div>
            </div>

            <!-- Slide 2: Buscar un cliente -->
            <div class="query-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
              <h4 class="font-bold text-brand-700 mb-2 text-center">2. Buscar un cliente por nombre</h4>
              <pre><code class="language-sql">SELECT * FROM Cliente WHERE Nombres LIKE '%Carlos%';</code></pre>
              <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                <img src="img/consulta-simple-2.png" alt="Resultado de buscar un cliente." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>consulta-simple-2.png</strong>)</p>
              </div>
            </div>

            <!-- Slide 3: Facturas con cliente -->
            <div class="query-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
              <h4 class="font-bold text-brand-700 mb-2 text-center">3. Mostrar facturas con su cliente (JOIN)</h4>
              <pre><code class="language-sql">SELECT 
    f.idFactura, 
    CONCAT(c.Nombres, ' ', c.PrimerApellido) AS Cliente, 
    f.FechaHora, 
    f.Total
FROM Factura f
JOIN Cliente c ON f.idCliente = c.idCliente;</code></pre>
              <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                <img src="img/consulta-intermedia-1.png" alt="Resultado de facturas con clientes." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>consulta-intermedia-1.png</strong>)</p>
              </div>
            </div>

            <!-- Slide 4: Detalle de factura -->
            <div class="query-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
              <h4 class="font-bold text-brand-700 mb-2 text-center">4. Detalle de una factura espec√≠fica (multi-JOIN)</h4>
              <pre><code class="language-sql">SELECT 
    f.idFactura,
    CONCAT(c.Nombres, ' ', c.PrimerApellido) AS Cliente,
    p.NombreProducto AS Producto,
    df.Cantidad,
    df.ValorUnitario
FROM Factura f
JOIN Cliente c ON f.idCliente = c.idCliente
JOIN DetalleFactura df ON f.idFactura = df.idFactura
JOIN Producto p ON df.idProducto = p.idProducto
WHERE f.idFactura = 1;</code></pre>
              <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                <img src="img/consulta-intermedia-2.png" alt="Resultado del detalle de una factura." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>consulta-intermedia-2.png</strong>)</p>
              </div>
            </div>
            
            <!-- Slide 5: Clientes con mayor gasto -->
            <div class="query-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
              <h4 class="font-bold text-brand-700 mb-2 text-center">5. Clientes con mayor gasto (GROUP BY, SUM)</h4>
              <pre><code class="language-sql">SELECT 
    CONCAT(c.Nombres, ' ', c.PrimerApellido) AS Cliente, 
    SUM(f.Total) AS GastoTotal
FROM Cliente c
JOIN Factura f ON c.idCliente = f.idCliente
GROUP BY Cliente
ORDER BY GastoTotal DESC;</code></pre>
              <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                <img src="img/consulta-avanzada-1.png" alt="Resultado de clientes con mayor gasto." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>consulta-avanzada-1.png</strong>)</p>
              </div>
            </div>
            
            <!-- Slide 6: Producto m√°s vendido -->
            <div class="query-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
              <h4 class="font-bold text-brand-700 mb-2 text-center">6. Producto m√°s vendido (GROUP BY, LIMIT)</h4>
              <pre><code class="language-sql">SELECT 
    p.NombreProducto, 
    SUM(df.Cantidad) AS CantidadVendida
FROM DetalleFactura df
JOIN Producto p ON df.idProducto = p.idProducto
GROUP BY p.NombreProducto
ORDER BY CantidadVendida DESC
LIMIT 1;</code></pre>
              <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                <img src="img/consulta-avanzada-2.png" alt="Resultado del producto m√°s vendido." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>consulta-avanzada-2.png</strong>)</p>
              </div>
            </div>
            
            <!-- Slide 7: Actualizar inventario -->
            <div class="query-slide hidden bg-white/50 p-4 rounded-xl border-2 border-black/50">
              <h4 class="font-bold text-brand-700 mb-2 text-center">7. Actualizar inventario (UPDATE)</h4>
              <pre><code class="language-sql">-- 1. Consultamos el stock actual para ver el cambio
SELECT CantidadDisponible FROM Inventario WHERE idProducto = 1 AND idTienda = 1;

-- 2. Ejecutamos la actualizaci√≥n (simulando que se vendieron 2 unidades)
UPDATE Inventario 
SET CantidadDisponible = CantidadDisponible - 2 
WHERE idProducto = 1 AND idTienda = 1;

-- 3. Verificamos el nuevo stock
SELECT CantidadDisponible FROM Inventario WHERE idProducto = 1 AND idTienda = 1;</code></pre>
              <div class="text-center bg-slate-100 p-4 rounded-2xl border-2 border-black shadow-pop mt-4">
                <img src="img/consulta-update.png" alt="Resultado de la actualizaci√≥n de inventario." class="mx-auto rounded-lg shadow-lg mb-2 w-full max-w-2xl">
                <p class="text-sm text-slate-600 font-semibold mt-3">(Reemplaza esta imagen. Nombre: <strong>consulta-update.png</strong>)</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- EXTRAS -->
    <section id="panel-extras" class="panel hidden">
      <div class="card-fun p-4 sm:p-6">
        <h2 class="text-2xl font-black mb-4">üí° ¬°Pon a Prueba tus Conocimientos!</h2>
        
        <div class="flex flex-wrap gap-2 sm:gap-3 mb-6 border-b-2 border-black pb-4">
          <button data-sub-tab="ex-desafio1" class="sub-tab-btn tab-btn tab-active rounded-xl px-4 py-2 text-sm">Desaf√≠o 1: Nuevo Cliente</button>
          <button data-sub-tab="ex-desafio2" class="sub-tab-btn tab-btn rounded-xl px-4 py-2 text-sm">Desaf√≠o 2: Venta Completa</button>
        </div>

        <div id="sub-panel-ex-desafio1" class="sub-panel space-y-6">
          <h3 class="font-bold text-lg">Registrar un Nuevo Cliente</h3>
          <p class="text-slate-700 mb-4">Tu misi√≥n es registrar a la clienta <strong>Diana Vargas Luna</strong> en la base de datos. Utiliza una sentencia <code>INSERT INTO</code> para a√±adir su informaci√≥n en la tabla <code>Cliente</code>.</p>
          <ul class="list-disc pl-5 space-y-1 text-slate-800">
            <li><strong>Nombres:</strong> Diana</li>
            <li><strong>PrimerApellido:</strong> Vargas</li>
            <li><strong>SegundoApellido:</strong> Luna</li>
            <li><strong>NIT:</strong> 903456789</li>
            <li><strong>Correo:</strong> diana.vargas@email.com</li>
            <li><strong>Telefono:</strong> 3158889900</li>
          </ul>
          <aside class="aside-card rounded-2xl shadow-pop p-4 sm:p-6 mt-6">
            <h3 class="font-bold text-lg mb-3">Pistas Clave</h3>
            <div class="text-sm text-slate-800 mt-2 space-y-2">
              <p>ü§î ¬øNecesitas especificar el <code>idCliente</code>? ¬øPor qu√© s√≠ o por qu√© no?</p>
              <p>‚ö†Ô∏è Recuerda que los valores de texto (VARCHAR) deben ir entre comillas simples (<code>'texto'</code>).</p>
            </div>
          </aside>
        </div>

        <div id="sub-panel-ex-desafio2" class="sub-panel hidden space-y-6">
          <h3 class="font-bold text-lg">Registrar una Venta Completa</h3>
          <p class="text-slate-700 mb-4">Este es m√°s avanzado. La clienta <strong>Diana Vargas</strong> (la que acabas de registrar) realiz√≥ una compra. Debes registrar toda la transacci√≥n, lo que implica insertar datos en <strong>tres tablas diferentes</strong>.</p>
          <ol class="list-decimal pl-5 space-y-4 text-slate-800">
            <li>
              <strong>Insertar la cabecera en <code>Factura</code>:</strong>
              <ul class="list-disc pl-5 mt-2 space-y-1">
                <li><strong>Cliente:</strong> Diana Vargas (usa el ID que se autogener√≥).</li>
                <li><strong>Empleado:</strong> Jorge Mendoza (ID: 2).</li>
                <li><strong>Tienda:</strong> Zapater√≠a Central (ID: 1).</li>
                <li><strong>FechaHora:</strong> Usa la fecha y hora actual.</li>
                <li><strong>Total:</strong> 550000.</li>
              </ul>
            </li>
            <li>
              <strong>Insertar los productos en <code>DetalleFactura</code>:</strong>
              <ul class="list-disc pl-5 mt-2 space-y-1">
                <li><strong>Producto 1:</strong> 'Sandalia Mujer' (ID: 3), Cantidad: 2.</li>
                <li><strong>Producto 2:</strong> 'Zapatilla Running' (ID: 1), Cantidad: 1.</li>
                <li>Recuerda usar el <code>idFactura</code> que se gener√≥ en el paso anterior.</li>
              </ul>
            </li>
            <li>
              <strong>Insertar el pago en <code>Pago</code>:</strong>
              <ul class="list-disc pl-5 mt-2 space-y-1">
                <li><strong>Monto:</strong> 550000.</li>
                <li><strong>TipoPago:</strong> 'Efectivo'.</li>
                <li>Tambi√©n necesita el <code>idFactura</code>.</li>
              </ul>
            </li>
          </ol>
           <aside class="aside-card rounded-2xl shadow-pop p-4 sm:p-6 mt-6">
            <h3 class="font-bold text-lg mb-3">Pistas Clave</h3>
            <div class="text-sm text-slate-800 mt-2 space-y-2">
              <p>üîÑ El <strong>orden</strong> de las inserciones es fundamental. ¬øCu√°l tabla depende de cu√°l?</p>
              <p>üîç ¬øC√≥mo puedes averiguar el <code>idCliente</code> y el <code>idFactura</code> que se acaban de generar para usarlos en las siguientes inserciones?</p>
            </div>
          </aside>
        </div>
        
        <details class="bg-amber-100/50 p-4 rounded-2xl border-2 border-black transition-all mt-8">
          <summary class="font-bold text-lg cursor-pointer hover:text-brand-600">¬øNecesitas ayuda? Haz clic aqu√≠ para ver las soluciones</summary>
          <div class="mt-4 pt-4 border-t border-brand-300">
            <h3 class="font-bold mb-2">Soluci√≥n Desaf√≠o 1:</h3>
            <pre><code class="language-sql">INSERT INTO Cliente (Nombres, PrimerApellido, SegundoApellido, NIT, Correo, Telefono)
VALUES ('Diana', 'Vargas', 'Luna', '903456789', 'diana.vargas@email.com', '3158889900');</code></pre>
            <h3 class="font-bold mt-6 mb-2">Soluci√≥n Desaf√≠o 2:</h3>
            <p class="text-sm text-slate-700 mb-3">Nota: Asumimos que el <code>idCliente</code> de Diana es 4 y que el <code>idFactura</code> generado ser√° 4. En un sistema real, obtendr√≠as estos IDs din√°micamente.</p>
            <pre><code class="language-sql">-- Paso A: Insertar en Factura
INSERT INTO Factura (FechaHora, SubTotal, Total, idEmpleado, idCliente, idTienda)
VALUES (NOW(), 550000, 550000, 2, 4, 1);

-- Paso B: Insertar en DetalleFactura (usando el ID de la factura reci√©n creada, ej: 4)
INSERT INTO DetalleFactura (idFactura, idProducto, Cantidad, ValorUnitario)
VALUES
(4, 3, 2, 150000),
(4, 1, 1, 250000);

-- Paso C: Insertar en Pago
INSERT INTO Pago (Monto, TipoPago, idFactura)
VALUES (550000, 'Efectivo', 4);</code></pre>
          </div>
        </details>
      </div>
    </section>
  </main>

  <footer>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-6 flex flex-col sm:flex-row items-center gap-3 sm:gap-6 text-sm">
      <span>¬© <span id="year"></span> üéâ Normalizaci√≥n 1FN‚Äì3FN ‚Ä¢ Caso Zapater√≠a.</span>
      <span class="hidden sm:inline">‚Ä¢</span>
      <span>üé§ Activa la voz para escuchar el resumen de cada secci√≥n.</span>
    </div>
  </footer>

  <!-- Elementos decorativos flotantes -->
  <div class="decoration-dot" style="top: 10%; left: 5%;"></div>
  <div class="decoration-dot" style="top: 80%; right: 10%; animation: bounce-slow 3s ease-in-out infinite;"></div>
  <div class="decoration-dot" style="top: 50%; left: 90%; background: #dc2626; animation: bounce-slow 2s ease-in-out infinite;"></div>

  <script>
    const $ = (q, el=document)=> el.querySelector(q);
    const $$ = (q, el=document)=> [...el.querySelectorAll(q)];

    // === Datos base para la demostraci√≥n de normalizaci√≥n ===
    const originalRows = [
      { factura:'F-1001', fecha:'2025-08-01 10:32', cliA:'Celi Jim√©nez', cliN:'Andr√©s Felipe', empN:'Mar√≠a', empA:'G√≥mez', suc:'Centro', productos:'SKU-ABC-001:38:Negro:159000:2 | SKU-XYZ-110:40:Blanco:199000:1' },
      { factura:'F-1002', fecha:'2025-08-02 16:10', cliA:'Ram√≠rez P√©rez', cliN:'Claudia',      empN:'Carlos', empA:'Rubiano', suc:'Norte',  productos:'SKU-ABC-001:39:Negro:159000:1 | SKU-FFF-210:37:Rojo:129000:2' },
      { factura:'F-1003', fecha:'2025-08-03 11:05', cliA:'Kent',          cliN:'Clark',        empN:'Alex',   empA:'Arce',    suc:'Centro', productos:'SKU-XYZ-110:40:Blanco:199000:2' },
      { factura:'F-1004', fecha:'2025-08-04 09:20', cliA:'Pineda',        cliN:'Leonardo',     empN:'Luis',   empA:'S√°nchez', suc:'Sur',    productos:'SKU-AAA-777:42:Azul:179000:1 | SKU-XYZ-110:41:Blanco:199000:1' }
    ];

    function renderBody(tbody, rows, columns){
      tbody.innerHTML='';
      rows.forEach(r=>{
        const tr=document.createElement('tr'); tr.className='hover:bg-brand-50/50 transition-all duration-200';
        columns.forEach(c=>{ const td=document.createElement('td'); td.className='px-4 py-3 whitespace-nowrap'; td.textContent = r[c] ?? ''; tr.appendChild(td); });
        tbody.appendChild(tr);
      });
    }

    function renderOriginal(){
      const rows = originalRows.map(r=>({
        factura:r.factura, fecha:r.fecha,
        cliente:`${r.cliA}, ${r.cliN}`, empleado:`${r.empN} ${r.empA}`, sucursal:r.suc, productos:r.productos
      }));
      renderBody($('#tbody-original'), rows, ['factura','fecha','cliente','empleado','sucursal','productos']);
    }

    function parseProductos(s){
      return String(s).split('|').map(x=>x.trim()).filter(Boolean).map((t,i)=>{
        const [sku,talla,color,precio,cantidad] = t.split(':').map(x=>x.trim());
        return { item:i+1, sku, talla, color, precio:Number(precio), cantidad:Number(cantidad) };
      });
    }
    function to1FN(rows){
      const out=[];
      for(const r of rows){
        const items=parseProductos(r.productos);
        for(const it of items){
          out.push({ factura:r.factura, item:it.item, sku:it.sku, talla:it.talla, color:it.color, precio:it.precio, cantidad:it.cantidad,
            cliente:`${r.cliA}, ${r.cliN}`, empleado:`${r.empN} ${r.empA}`, sucursal:r.suc });
        }
      }
      return out;
    }
    function render1FN(){
      renderBody($('#tbody-1fn'), to1FN(originalRows), ['factura','item','sku','talla','color','precio','cantidad','cliente','empleado','sucursal']);
    }

    function to2FN(rows1){
      const cab=new Map(); const det=[]; const itemCounters={};
      for(const r of rows1){
        if(!cab.has(r.factura)) cab.set(r.factura,{ id_factura:r.factura, fecha_hora: originalRows.find(x=>x.factura===r.factura).fecha, cliente:r.cliente, empleado:r.empleado, sucursal:r.sucursal });
        if(!itemCounters[r.factura]) itemCounters[r.factura]=0; itemCounters[r.factura]++;
        det.push({ id_factura:r.factura, item:itemCounters[r.factura], sku:r.sku, talla:r.talla, color:r.color, precio_unidad:r.precio, cantidad:r.cantidad });
      }
      return { factura:[...cab.values()], detalle:det };
    }
    function render2FN(){
      const rows1 = to1FN(originalRows);
      const { factura, detalle } = to2FN(rows1);
      renderBody($('#tbody-2fn-a'), factura, ['id_factura','fecha_hora','cliente','empleado','sucursal']);
      renderBody($('#tbody-2fn-b'), detalle, ['id_factura','item','sku','talla','color','precio_unidad','cantidad']);
    }

    function to3FN(rows1){
      const uniq = arr => [...new Set(arr)];
      const clients = uniq(rows1.map(r=>`${r.cliente}`));
      const empleados = uniq(rows1.map(r=>`${r.empleado}`));
      const sucursales = uniq(rows1.map(r=>`${r.sucursal}`));
      const refs = uniq(rows1.map(r=>`${r.sku}|${r.talla}|${r.color}|${r.precio}`));
      const clientes = clients.map((n,i)=>{ const [apellidos, nombres]=n.split(',').map(x=>x.trim()); return { id_cliente:i+1, apellidos, nombres }; });
      const empleadosTbl = empleados.map((n,i)=>{ const parts=n.split(' '); const nombres=parts.slice(0,-1).join(' ')||n; const apellidos=parts.slice(-1).join(' '); return { id_empleado:i+1, nombres, apellidos }; });
      const sucTbl = sucursales.map((n,i)=>({ id_sucursal:i+1, nombre:n }));
      const refTbl = refs.map((s,i)=>{ const [sku,talla,color,precio]=s.split('|'); return { id_referencia:i+1, sku, talla, color, precio:Number(precio) }; });
      const idByCliente = Object.fromEntries(clientes.map(o=>[`${o.apellidos}, ${o.nombres}`, o.id_cliente]));
      const idByEmpleado = Object.fromEntries(empleadosTbl.map(o=>[`${o.nombres} ${o.apellidos}`.trim(), o.id_empleado]));
      const idBySucursal = Object.fromEntries(sucTbl.map(o=>[o.nombre, o.id_sucursal]));
      const idByRef = Object.fromEntries(refTbl.map(o=>[o.sku+"|"+o.talla+"|"+o.color+"|"+o.precio, o.id_referencia]));
      const facturasMap = new Map();
      const detalle = [];
      for(const r of rows1){
        const key=r.factura;
        const id_cliente=idByCliente[r.cliente];
        const id_empleado=idByEmpleado[r.empleado];
        const id_sucursal=idBySucursal[r.sucursal];
        if(!facturasMap.has(key)) facturasMap.set(key,{ id_factura:key, fecha_hora: originalRows.find(x=>x.factura===key).fecha, id_cliente, id_empleado, id_sucursal, total:0 });
        const refKey = `${r.sku}|${r.talla}|${r.color}|${r.precio}`;
        const id_referencia=idByRef[refKey];
        const item=(detalle.filter(d=>d.id_factura===key).length)+1;
        detalle.push({ id_factura:key, item, id_referencia, cantidad:r.cantidad, valor_unitario:r.precio });
        facturasMap.get(key).total += r.cantidad*r.precio;
      }
      const facturas = [...facturasMap.values()].map(f=>({ ...f, total: Number(f.total.toFixed(2)) }));
      return { clientes, empleados:empleadosTbl, sucursales:sucTbl, referencias:refTbl, facturas, detalle };
    }
    function render3FN(){
      const rows1 = to1FN(originalRows);
      const { clientes, empleados, sucursales, referencias, facturas, detalle } = to3FN(rows1);
      renderBody($('#tbody-3fn-clientes'), clientes, ['id_cliente','apellidos','nombres']);
      renderBody($('#tbody-3fn-empleados'), empleados, ['id_empleado','nombres','apellidos']);
      renderBody($('#tbody-3fn-sucursales'), sucursales, ['id_sucursal','nombre']);
      renderBody($('#tbody-3fn-referencias'), referencias, ['id_referencia','sku','talla','color','precio']);
      renderBody($('#tbody-3fn-facturas'), facturas, ['id_factura','fecha_hora','id_cliente','id_empleado','id_sucursal','total']);
      renderBody($('#tbody-3fn-detalle'), detalle, ['id_factura','item','id_referencia','cantidad','valor_unitario']);
    }

    // === L√≥gica de Voz y Pesta√±as ===
    let voiceEnabled = false;
    let selectedVoice = null;
    
    function switchTo(tab){
      $$('.tab-btn:not(.sub-tab-btn)').forEach(b=> b.classList.toggle('tab-active', b.dataset.tab===tab));
      $$('.panel').forEach(p=>{ 
        if(p.id==='panel-'+tab){ 
          p.classList.remove('hidden'); 
          p.style.animation = 'none';
          p.offsetHeight;
          p.style.animation = 'slideIn 0.5s ease-out';
        } else { 
          p.classList.add('hidden'); 
        } 
      });
      
      if (tab === 'erd') setupInteractiveERD();
      if(voiceEnabled) speakCurrentSummary();
    }

    function switchSubTab(subTabId, panelId) {
      const container = $(`#${panelId}`);
      if (!container) return;
      $$('.sub-tab-btn', container).forEach(b => b.classList.toggle('tab-active', b.dataset.subTab === subTabId));
      $$('.sub-panel', container).forEach(p => {
        if (p.id === `sub-panel-${subTabId}`) {
          p.classList.remove('hidden');
          p.style.animation = 'none';
          p.offsetHeight;
          p.style.animation = 'fade-up .45s cubic-bezier(.2,.8,.2,1)';
        } else {
          p.classList.add('hidden');
        }
      });
    }
    
    function getPreferredVoice(){
      const voices = window.speechSynthesis.getVoices();
      if(!voices.length) return null;
      const prefs = [
        v => v.lang?.toLowerCase().includes('es-419') && /google|microsoft/i.test(v.name),
        v => v.lang?.toLowerCase().startsWith('es') && /google|microsoft|natural/i.test(v.name),
        v => v.lang?.toLowerCase().startsWith('es')
      ];
      for(const rule of prefs){ const found = voices.find(rule); if(found) return found; }
      return voices[0];
    }
    
    function speakText(text){
      try{
        if(!('speechSynthesis'in window)) return;
        window.speechSynthesis.cancel();
        const u = new SpeechSynthesisUtterance(String(text||''));
        u.lang = (selectedVoice && selectedVoice.lang)?selectedVoice.lang:'es-ES';
        if(selectedVoice) u.voice = selectedVoice;
        u.rate = 1;
        window.speechSynthesis.speak(u);
      }catch(e){console.warn('TTS error', e);}
    }

    function speakCurrentSummary(){
      if(!voiceEnabled) return;
      const activeTab = $('.tab-active[data-tab]')?.dataset.tab || 'original';
      const panel = $('#panel-'+activeTab);
      let text = panel?.querySelector('[data-role="explanation"]')?.innerText.trim() || '';
      if(!text) text = ({
          original: '¬°Hola! Estamos viendo la tabla original, que viola la primera forma normal. ¬°Vamos a arreglarlo!',
          '1fn': '¬°Genial! En la primera forma normal, cada producto ocupa su propia fila. Mucho mejor, ¬øverdad?',
          '2fn': '¬°Excelente! En la segunda forma normal separamos la cabecera del detalle para eliminar dependencias parciales.',
          '3fn': '¬°Lo logramos! En la tercera forma normal tenemos tablas maestras con claves for√°neas. ¬°La normalizaci√≥n est√° completa!',
          erd: '¬°Aqu√≠ est√° nuestro hermoso diagrama final! Muestra las relaciones entre todas las tablas.',
          implementacion: 'Esta secci√≥n muestra la implementaci√≥n pr√°ctica del modelo en SQL, desde crear la base de datos hasta insertar los datos.',
          consultas: 'Ahora, exploremos la base de datos con diferentes tipos de consultas SQL, desde simples hasta avanzadas.',
          extras: '¬°Es tu turno! Esta secci√≥n te reta a escribir tus propias consultas SQL para poner a prueba lo que has aprendido.'
        })[activeTab] || 'Resumen no disponible.';
      speakText(text);
    }

    document.addEventListener('change', (e)=>{
      if(e.target?.id==='voice-select'){
        const name = e.target.value;
        selectedVoice = window.speechSynthesis.getVoices().find(x=>x.name===name) || getPreferredVoice();
      }
    });
    
    // === L√≥gica del visor interactivo del ERD ===
    const erdState = {
      isInitialized: false, scale: 1, panX: 0, panY: 0,
      isPanning: false, startX: 0, startY: 0,
      viewport: null, image: null
    };

    function setupInteractiveERD() {
        if (erdState.isInitialized) return;
        erdState.viewport = $('#erd-viewport');
        erdState.image = $('#erd-interactive-img');
        if (!erdState.viewport || !erdState.image) return;

        const updateERDTransform = () => erdState.image.style.transform = `translate(${erdState.panX}px, ${erdState.panY}px) scale(${erdState.scale})`;
        
        const resetERDView = () => {
            if (!erdState.image.complete || erdState.image.naturalWidth === 0 || erdState.viewport.clientWidth === 0) return;
            erdState.scale = Math.min(1, erdState.viewport.clientWidth / erdState.image.naturalWidth);
            const scaledHeight = erdState.image.naturalHeight * erdState.scale;
            erdState.panX = 0;
            erdState.panY = Math.max(0, (erdState.viewport.clientHeight - scaledHeight) / 2);
            updateERDTransform();
        };
        
        erdState.image.onload = resetERDView;
        if (erdState.image.complete) resetERDView();
        
        $('#erd-zoom-in')?.addEventListener('click', () => { erdState.scale = Math.min(4, erdState.scale * 1.25); updateERDTransform(); });
        $('#erd-zoom-out')?.addEventListener('click', () => { erdState.scale = Math.max(0.2, erdState.scale / 1.25); updateERDTransform(); });
        $('#erd-zoom-fit')?.addEventListener('click', resetERDView);
        
        erdState.viewport.addEventListener('mousedown', (e) => { e.preventDefault(); erdState.isPanning = true; erdState.startX = e.clientX - erdState.panX; erdState.startY = e.clientY - erdState.panY; });
        document.addEventListener('mousemove', (e) => { if (erdState.isPanning) { erdState.panX = e.clientX - erdState.startX; erdState.panY = e.clientY - erdState.startY; updateERDTransform(); } });
        document.addEventListener('mouseup', () => { erdState.isPanning = false; });
        erdState.viewport.addEventListener('wheel', (e) => {
            e.preventDefault();
            const rect = erdState.viewport.getBoundingClientRect();
            const mouseX = e.clientX - rect.left; const mouseY = e.clientY - rect.top;
            const scaleAmount = 1 - e.deltaY * 0.001;
            const newScale = Math.max(0.2, Math.min(4, erdState.scale * scaleAmount));
            erdState.panX = mouseX - (mouseX - erdState.panX) * (newScale / erdState.scale);
            erdState.panY = mouseY - (mouseY - erdState.panY) * (newScale / erdState.scale);
            erdState.scale = newScale;
            updateERDTransform();
        });
        
        new ResizeObserver(resetERDView).observe(erdState.viewport);
        erdState.isInitialized = true;
    }
    
    // === L√≥gica para los SLIDESHOWS (reutilizable) ===
    const slideshows = {};

    function setupSlideshow(containerId, slideClass, counterPrefix) {
      const container = $(`#${containerId}`);
      if (!container) return;

      const slides = $$(`.${slideClass}`, container);
      const totalSlides = slides.length;
      if (totalSlides === 0) return;

      slideshows[containerId] = {
        currentIndex: 0,
        slides: slides,
        totalSlides: totalSlides,
        prevBtn: $(`[id^="prev-"]`, container),
        nextBtn: $(`[id^="next-"]`, container),
        counter: $(`[id$="-counter"]`, container),
        counterPrefix: counterPrefix
      };

      const updateView = () => {
        const state = slideshows[containerId];
        state.slides.forEach((slide, index) => {
          slide.classList.toggle('hidden', index !== state.currentIndex);
          if (index === state.currentIndex) {
            slide.style.animation = 'none';
            slide.offsetHeight; // Trigger reflow
            slide.style.animation = 'fade-up .45s';
          }
        });
        state.counter.textContent = `${state.counterPrefix} ${state.currentIndex + 1} de ${state.totalSlides}`;
        state.prevBtn.disabled = state.currentIndex === 0;
        state.nextBtn.disabled = state.currentIndex === totalSlides - 1;
      };

      slideshows[containerId].prevBtn.addEventListener('click', () => {
        if (slideshows[containerId].currentIndex > 0) {
          slideshows[containerId].currentIndex--;
          updateView();
        }
      });

      slideshows[containerId].nextBtn.addEventListener('click', () => {
        if (slideshows[containerId].currentIndex < totalSlides - 1) {
          slideshows[containerId].currentIndex++;
          updateView();
        }
      });
      
      updateView(); // Initial view setup
    }

    // === L√≥gica para los botones de Copiar C√≥digo ===
    function setupCopyButtons() {
      $$('pre').forEach(preElement => {
        // Evitar a√±adir un bot√≥n si ya existe
        if (preElement.parentNode.classList.contains('group')) return;

        const wrapper = document.createElement('div');
        wrapper.className = 'relative group';

        const copyButton = document.createElement('button');
        copyButton.innerHTML = 'Copiar';
        copyButton.className = 'absolute top-3 right-3 bg-slate-800/50 backdrop-blur text-white text-xs font-semibold px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-slate-700/70 border-0';
        copyButton.style.boxShadow = 'none';
        
        preElement.parentNode.insertBefore(wrapper, preElement);
        wrapper.appendChild(preElement);
        wrapper.appendChild(copyButton);

        copyButton.addEventListener('click', () => {
          const codeToCopy = preElement.querySelector('code')?.innerText || '';
          navigator.clipboard.writeText(codeToCopy).then(() => {
            copyButton.textContent = '¬°Copiado!';
            setTimeout(() => { copyButton.textContent = 'Copiar'; }, 2000);
          }).catch(err => {
            console.error('Error al copiar el c√≥digo: ', err);
            copyButton.textContent = 'Error';
             setTimeout(() => { copyButton.textContent = 'Copiar'; }, 2000);
          });
        });
      });
    }

    function init(){
      $('#year').textContent = new Date().getFullYear();
      renderOriginal(); render1FN(); render2FN(); render3FN();
      
      $$('.tab-btn:not(.sub-tab-btn)').forEach(b=> b.addEventListener('click', ()=> switchTo(b.dataset.tab)));
      $$('.sub-tab-btn').forEach(b => {
        b.addEventListener('click', () => {
          const subTabId = b.dataset.subTab;
          const panel = b.closest('.panel');
          if (panel) {
            switchSubTab(subTabId, panel.id);
          }
        });
      });

      $('#btn-voice').addEventListener('click', (e)=>{ 
        voiceEnabled=true; 
        speakCurrentSummary(); 
        e.target.classList.add('animate-bounce');
        setTimeout(() => e.target.classList.remove('animate-bounce'), 1000);
      });
      $('#btn-stop-voice').addEventListener('click', ()=> {
        window.speechSynthesis?.cancel();
        voiceEnabled = false;
      });
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      window.speechSynthesis.onvoiceschanged = () => {
        const voices = window.speechSynthesis.getVoices();
        const select = $('#voice-select');
        if(select){
          select.innerHTML = `<option value="">üé§ Voz (auto)</option>${voices.map(v => `<option value="${v.name}">${v.name} (${v.lang})</option>`).join('')}`;
          selectedVoice = getPreferredVoice();
        }
      };
      init();
      setupInteractiveERD();
      // Inicializar todos los slideshows
      setupSlideshow('table-slideshow-container', 'table-slide', 'Tabla');
      setupSlideshow('insert-slideshow-container', 'insert-slide', 'Paso');
      setupSlideshow('query-slideshow-container', 'query-slide', 'Consulta');
      setupCopyButtons();
    });
  </script>
</body>
</html>